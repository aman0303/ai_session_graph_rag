
# Derived Events FAQ


**Q. Can you define a derived event that uses multiple event streams as the source? In other words, can you do a JOIN of multiple tables in a derived event?**



Yes, use the VAR clause in your query to union data and JOIN to join it.



**Q. How are the Partition Key (PK) and Row Key (RK) determined for a derived event?**



If a derived event is run centrally, then currently the default PK and RK are assigned as follows:  
1. the PK is always the start time stamp of the query interval  
2. if the derived event has no groupby, then the RK is inherited from the source. Otherwise, the RK is  
the concatenation of the groupby columns.  
You can override the default PK and RK, but you must override both of them.



\*\* Pk/Rk is a table only (storeType="Central") concept. CentralBond is a blob storage format.



**Q. Are there limitations around the size of Partition Key and Row Key values****?**



Yes, if you are using storeType="Central" and your PK or RK is longer than 512 characters, there may exceptions writing results to XStore. This is typically an issue when several groupby columns are used. To work around these limitations, you can override the RK with a deterministic hash. An example of how to do this in your query is shown below.



    
    groupby Column1, Column2, Column3
    let PkTemp= FixedLengthString(BeginOfQueryInterval())
    let RkTemp = CreateDeterministicGuid(Concat("___", Column1, Column2, Column3))
    let PartitionKey = PkTemp
    let RowKey = RkTemp



**Q. How do mapping monikers affect centrally derived events?**



You can optionally use Mapping monikers in the <Account> section of your config to distribute MA uploaded data between multiple storage accounts. When the source of your derived event is generated by MA and mapping monikers are used, your centrally derived event will run separate queries to process data from each of your storage accounts. The derived event will then write each set of results to your default storage account. For example, the below mapping would cause a central derived event to run 3 independent queries (1 for each storage account) and to write the result to the default storage account, "MyMonikerGroupUSWest".



    
    &lt;Account moniker="MyMonikerGroup" isDefault="true"&gt;
        &lt;Mapping moniker="MyMonikerGroupUSWest" isDefault="true" /&gt;
        &lt;Mapping moniker="MyMonikerGroupUSEast" /&gt;
        &lt;Mapping moniker="MyMonikerGroupUSCentral" /&gt;
    &lt;/Account&gt;



**Q. How many rows can a single central derived event instance query?**



A single derived event instance can query up to 20 million rows. Derived events attempting to query more than 20 million rows will experience data loss. When the source table of a central derived event uses mapping monikers, a separate derived event instance will be run for each mapping moniker.



**Q. When using groupby in a query, how many rows can be in a single group?**



A single group can contain no more than 300k rows. If any group contains more rows than 300k rows, the derived event will fail without producing any result.

